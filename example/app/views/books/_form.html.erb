<% form_for_conductor @book_conductor do |form| %>
  <%= error_messages_for :book_conductor %>
  
  <p>
    <%= form.label :name %><br>
    <%= form.text_field :name %>
  </p>
  
  <p>
    <%= form.label :publisher %> (Options are <%= @book.potential_publishers.to_sentence %>.)<br>
    <%= form.text_field :publisher %>
  </p>
  
  <h3>Authors</h3>
  
  <table>
    <tr>
      <th>Name</th>
      <th>Role</th>
    </tr>
    
    <% form.fields_for_collection(:authorships, @book.potential_authorships) do |fields, authorship| -%>
      <tr>
        <td>
          <%= fields.inclusion_check_box :author_id %>
          <%= fields.label :author_id, authorship.author_name %>
        </td>
        <td>
          <%= fields.text_field :role %>
        </td>
      </tr>
    <% end -%>
  </table>
  
  <h3>Tags</h3>
  
  <ul>
    <% @book.potential_tags.each do |tag| -%>
      <li>
        <%= check_box_tag "book[tag_ids][]", tag.id, @book.tags.include?(tag), :id => "book_tag_ids_#{tag.id}" %>
        <%= label_tag "book_tag_ids_#{tag.id}", tag -%>
      </li>
    <% end -%>
  </ul>
  
  <p><%= form.submit %></p>
<% end %>
